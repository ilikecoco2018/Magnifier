<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>放大镜</title>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
        list-style: none;
        text-decoration: none;
    }
    .box{
        width: 345px;
        height: 242px;
        border: 2px solid red;
        float: left;
        background-image: url("pacture.jpg");
        background-size: cover;
        margin-left: 100px;
    }
    .son{
        width: 200px;
        height: 200px;
        border: 2px solid red;
        float: left;
        margin-left: 20px;
        display: none;
    }

</style>
<body>
<div class="box">

</div>
<div class="son">

</div>
</body>
<script>
    let imgEle = document.querySelector(".box");
    let sonEle = document.querySelector(".son");

imgEle.onmousemove = function (event) {
    let left=event.clientX-imgEle.offsetLeft-50;
    let top=event.clientY-imgEle.offsetTop-50;
    if (left < 0 ){
        left = 0;
    }
    if (top < 0 ){
        top = 0;
    }
    if (left>245){
        left = 245;
    }
    if (top>142){
        top = 142;
    }
    sonEle.style.display = "block";
    sonEle.style.background = `url("pacture.jpg") no-repeat  -${left*2}px  -${top*2}px`;



    let str = `<div style="width: 100px;height: 100px;background: rgba(0,0,0,1);margin-left: ${left}px;margin-top: ${top}px"></div>`;
    imgEle.innerHTML = str;

};
imgEle.onmouseleave = function () {
    imgEle.innerHTML = "";
    sonEle.style.display = "none";
};

</script>
</html>